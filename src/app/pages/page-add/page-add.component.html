<section class="page-add">
  <ng-container *ngIf="user()?.isAdmin; else noAccess">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="form">
      <div class="field">
        <label for="title">Title *</label>
        <input id="title" type="text" formControlName="title" placeholder="Title" />
        <p class="validation" *ngIf="form.controls.title.invalid && form.controls.title.touched">
          Title is required.
        </p>
      </div>

      <div class="field">
        <label for="metaTitle">Meta title</label>
        <input id="metaTitle" type="text" formControlName="metaTitle" placeholder="Meta title" />
      </div>

      <div class="field">
        <label for="image">Image</label>
        <input id="image" type="text" formControlName="image" placeholder="Image URL" />
      </div>

      <div class="field">
        <label for="description">Description</label>
        <input id="description" type="text" formControlName="description" placeholder="Description" />
      </div>

      <div class="field">
        <label for="url">URL</label>
        <input id="url" type="text" formControlName="url" placeholder="url" />
      </div>

      <div class="field">
        <label for="position">Position</label>
        <input id="position" type="number" formControlName="position" placeholder="Position" />
      </div>

      <div class="field">
        <label for="hidden">Hidden</label>
        <input id="hidden" type="text" formControlName="hidden" placeholder="false" />
      </div>

      <div class="field">
        <label for="onlyHTML">Only HTML</label>
        <input id="onlyHTML" type="text" formControlName="onlyHTML" placeholder="false" />
      </div>

      <div class="field">
        <label for="content">Content *</label>
        <textarea id="content" rows="12" formControlName="content" placeholder="# Heading"></textarea>
        <p class="validation" *ngIf="form.controls.content.invalid && form.controls.content.touched">
          Content is required.
        </p>
      </div>

      <div class="actions">
        <button type="button" class="btn" (click)="togglePreview()">
          {{ showPreview() ? 'Hide preview' : 'Show preview' }}
        </button>
        <button type="submit" class="btn primary" [disabled]="pending()">
          {{ pending() ? 'Savingâ€¦' : 'Save page' }}
        </button>
      </div>

      <p class="error" *ngIf="errorMessage()">{{ errorMessage() }}</p>
      <p class="success" *ngIf="successMessage()">{{ successMessage() }}</p>
    </form>

    <div class="preview" *ngIf="previewContent() as html">
      <h2>Preview</h2>
      <div class="preview-content" [innerHTML]="html"></div>
    </div>
  </ng-container>

  <ng-template #noAccess>
    <p class="error">You need administrator rights to add a page.</p>
  </ng-template>
</section>
